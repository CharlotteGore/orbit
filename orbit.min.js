(function(window,undefined){var orbit=function(selector,args){return new orbit.fn.init(selector,args);}
version="0.1";orbit.fn=orbit.prototype={init:function(selector,args){this.elements=[];if(selector&&(typeof selector==='string')){this.elements=NW.Dom.select(selector,args);}else{if(selector&&selector.nodeType){this.elements[0]=selector;}}
return this;}};orbit.fn.init.prototype=orbit.fn;orbit.extend=orbit.fn.extend=function(){var target=this,i=0,length=arguments.length,options,name,src,copy;for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue;}
if(copy!==undefined){target[name]=copy;}}}}
return target;};orbit.fn.extend({each:function(fn){var i=this.elements.length;while(i--){fn.call(this,this.elements[i]);}
return this;},setStyle:function(property,value){this.each(function(el){el.style[property]=value;});return this;},show:function(){var that=this;this.each(function(el){that.setStyle('display','block');});return this;},hide:function(){var that=this;this.each(function(el){that.setStyle('display','block');});return this;},html:function(str){this.each(function(el){el.innerHTML=str;});return this;}});orbit.fn.extend({getCenter:function(){var dimensions=[],dimensionHelper;dimensionHelper=function(el){var x=0,y=0;x=Math.max(el.clientWidth,el.offsetWidth)/2;y=Math.max(el.clientHeight,el.offsetHeigh)/2;return{x:x,y:y};};this.each(function(el){dimensions.push(dimensionHelper(el));});return dimensions;},getPosition:function(){var positions=[],positionHelper;positionHelper=function(el){var curleft=0,curtop=0;if(el.offsetParent){do{curleft+=el.offsetLeft;curtop+=el.offsetTop;}while(el=el.offsetParent);return{x:curleft,y:curtop};}};this.each(function(el){positions.push(positionHelper(el));});return positions;},getInnerPosition:function(){var positions=[],positionHelper;positionHelper=function(el){var curleft=0,curtop=0;curleft+=el.offsetLeft;curtop+=el.offsetTop;return{x:curleft,y:curtop};};this.each(function(el){positions.push(positionHelper(el));});return positions;},getMouse:function(evt){var pointerX=function(event){var docElement=document.documentElement,body=document.body||{scrollLeft:0};return event.pageX||(event.clientX+
(docElement.scrollLeft||body.scrollLeft)-
(docElement.clientLeft||0));};var pointerY=function(event){var docElement=document.documentElement,body=document.body||{scrollTop:0};return event.pageY||(event.clientY+
(docElement.scrollTop||body.scrollTop)-
(docElement.clientTop||0));};return{x:pointerX(evt),y:pointerY(evt)};}});orbit.fn.extend({tween:function(o){if(!o){return this;}
var that=this,timeoutID=-1,stopAnimation=false,tick=40,callback=o.callback||function(){},delay=o.delay||tick,loop=o.loop||false,steps=(o.duration/tick),duration=(o.duration/steps)||5,startTime,elapsedTime,oldPercent,bezierPresets,animations,pathType,bezier,getValueByPercent,rgbHexToArray,stripUnits,preCalcTransforms,timeCache=0,getElapsedPercent,start,stop,getRawValuesAtFrame,goToFrame,goToFrameAtTime,percent,step,startValues,endValues,i,hideOverflow,absolutize,genericInitHandler,reverse=false;bezierPresets={decelerate:function(startValue,endValue){return{p1:endValue,p2:endValue,p3:endValue,p4:startValue};},accelerate:function(startValue,endValue){return{p1:endValue,p2:startValue,p3:startValue,p4:startValue};},bubble:function(startValue,endValue){return{p1:endValue,p2:endValue,p3:startValue,p4:startValue};},linear:function(startValue,endValue){return 0;}};if(o.easing){switch(o.easing){case"in":pathType=bezierPresets.accelerate;break;case"out":pathType=bezierPresets.decelerate;break;case"both":pathType=bezierPresets.bubble;break;case"none":pathType=bezierPresets.linear;break;default:pathType=bezierPresets.decelerate;}}else{pathType=bezierPresets.decelerate;}
rgbHexToArray=function(rgbHex){var color=[];rgbHex=rgbHex.replace("#","");if(rgbHex.length==3){color[0]=parseInt(rgbHex.substr(0,1)+rgbHex.substr(0,1),16);color[1]=parseInt(rgbHex.substr(1,1)+rgbHex.substr(1,1),16);color[2]=parseInt(rgbHex.substr(2,1)+rgbHex.substr(2,1),16);}else{color[0]=parseInt(rgbHex.substr(0,2),16);color[1]=parseInt(rgbHex.substr(2,2),16);color[2]=parseInt(rgbHex.substr(4,2),16);}
return color;};circlePointsPrecalc=function(){var CIRCLE_RESOLUTION=45,tx,ty,itx,ity,n,nl,j,k,p,o,step=Math.PI/(CIRCLE_RESOLUTION*4),applyOffsetsToOrigin;applyOffsetsToOrigin=function(x,y){x=(animations[i].origin[0]+x);y=(animations[i].origin[1]-y);return{x:x,y:y};};animations[i].circlePreCache=[];o=animations[i].circlePreCache;for(n=0,nl=CIRCLE_RESOLUTION;n<=nl;n+=1){p=(step*n);if(typeof animations[i].radius!=='number'){tx=Math.round(animations[i].radius[0]*Math.sin(p));ty=Math.round(animations[i].radius[1]*Math.cos(p));}else{tx=Math.round(animations[i].radius*Math.sin(p));ty=Math.round(animations[i].radius*Math.cos(p));}
itx=tx*-1;ity=ty*-1;j=n;k=nl-n;o[j]=applyOffsetsToOrigin(tx,ty);k+=nl;o[k]=applyOffsetsToOrigin(ty,tx);j+=(nl*2);o[j]=applyOffsetsToOrigin(ty,itx);k+=(nl*2);o[k]=applyOffsetsToOrigin(tx,ity);j+=(nl*2);o[j]=applyOffsetsToOrigin(itx,ity);k+=(nl*2);o[k]=applyOffsetsToOrigin(ity,itx);j+=(nl*2);o[j]=applyOffsetsToOrigin(ity,tx);k+=(nl*2);o[k]=applyOffsetsToOrigin(itx,ty);}};stripUnits=function(str){var matches;if(typeof str==='number'){animations[i].units="px";return str;}else{matches=str.match(/^([0-9\.\-]+)(px|em|)$/);animations[i].units=matches[2]||"px";return parseFloat(matches[1]);}};genericInitHandler=function(){animations[i].transforms[0]=initTransform(animations[i].startValue,animations[i].endValue);};initTransform=function(start,end){return{startValue:stripUnits(start),endValue:stripUnits(end),path:[]};};animations=o.animations;hideOverflow=function(el){that.setStyle("overflow","hidden");};absolutize=function(el){that.setStyle("position","absolute");};i=animations.length;while(i--){var ani=animations[i];if(ani.radius&&ani.origin){ani.transforms=[];genericInitHandler();ani.isOrbit=true;circlePointsPrecalc();}else if(ani.handle&&typeof ani.handle.getRawValuesAtFrame==='function'){}else{ani.transforms=[];switch(ani.property){case"height":case"width":genericInitHandler();this.each(hideOverflow);break;case"left":case"right":case"top":case"bottom":case"borderWidth":genericInitHandler();this.each(absolutize);break;case"color":case"backgroundColor":case"borderColor":startValues=rgbHexToArray(ani.startValue);endValues=rgbHexToArray(ani.endValue);for(var m=0;m<3;m+=1){ani.transforms[m]=initTransform(startValues[m],endValues[m]);}
break;case"backgroundPosition":case"size":case"position":case"boxShadow":startValues=ani.startValue.split(' ');endValues=ani.endValue.split(' ');for(m=0;m<2;m+=1){ani.transforms[m]=initTransform(startValues[m],endValues[m]);}
this.each(absolutize);break;default:genericInitHandler();break;}}
delete(ani.startValue);delete(ani.endValue);}
bezier={B1:function(t){return(t*t*t);},B2:function(t){return(3*t*t*(1-t));},B3:function(t){return(3*t*(1-t)*(1-t));},B4:function(t){return((1-t)*(1-t)*(1-t));}};getValueByPercent=function(percent,bez){var value=0,b=bezier;value=bez.p1*b.B1(percent)+bez.p2*b.B2(percent)+bez.p3*b.B3(percent)+bez.p4*b.B4(percent);return value;};preCalcTransforms=function(){var bez,i,j,m,difference;generateBezierCurve=function(startValue,endValue){var temp=[];var l;bez=pathType(startValue,endValue);if(!bez){difference=endValue-startValue;l=(steps+1);while(l--){if(difference){temp[l]=startValue+(difference*l/steps);}else{temp[l]=startValue;}}}else{j=(steps+1);while(j--){temp[j]=getValueByPercent((j/steps),bez);}}
return temp;};i=animations.length;while(i--){if(!animations[i].handle){m=animations[i].transforms.length;while(m--){animations[i].transforms[m].path=generateBezierCurve(animations[i].transforms[m].startValue,animations[i].transforms[m].endValue);if(animations[i].isOrbit){j=(steps+1);var t=animations[i].transforms;animations[i].transforms[1]={};animations[i].transforms[1].path=[];while(j--){var values=animations[i].circlePreCache[Math.round(t[0].path[j])];t[0].path[j]=values.x;t[1].path[j]=values.y;}}}}}};getElapsedPercent=function(){elapsedTime=(new Date()).getTime()-startTime;var percent=Math.round(elapsedTime/(duration));if(percent>steps){percent=steps;}
return percent;};stop=function(){stopAnimation=true;return this;};start=function(o){var d;stopAnimation=false;if(o){if(o.syncWith){startTime=o.syncWith.getStartTime();}}else{d=new Date();startTime=d.getTime();}
timeoutID=setTimeout(step,0);return this;};getStartTime=function(){return startTime;};getRawValuesAtFrame=function(p){};goToFrame=function(p,elapsedTime){percent=p;for(i=0;i<animations.length;i+=1){if(animations[i].handle&&elapsedTime){animations[i].handle.goToFrameAtTime(elapsedTime);}else if(updateHandlers[animations[i].property]){updateHandlers[animations[i].property](animations[i]);}else{updateHandlers.generic(animations[i]);}}
return this;};goToFrameAtTime=function(elapsedTime){elapsedTime=elapsedTime%(duration*steps);var percent=Math.round(elapsedTime/duration);this.goToFrame(percent,elapsedTime);};var updateHandlers={opacity:function(o){var value=o.transforms[0].path[percent];that.each(function(el){el.style.opacity=value/100;});},generic:function(o){var value=o.transforms[0].path[percent];if(o.units=="px"){value=Math.round(value);}
that.each(function(el){el.style[o.property]=value+o.units;});},genericColor:function(o){var i,hash="#",value;for(i=0;i<3;i+=1){value=(Math.round(o.transforms[i].path[percent])).toString(16);if(value.length===1){value="0"+value;}
hash+=value;}
that.each(function(el){el.style[o.property]=hash;});},position:function(o){var value={};value.x=o.transforms[0].path[percent];value.y=o.transforms[1].path[percent];that.each(function(el){el.style.left=value.x+o.units;el.style.top=value.y+o.units;});},size:function(o){var value={};value.x=o.transforms[0].path[percent];value.y=o.transforms[1].path[percent];that.each(function(el){el.style.width=value.x+o.units;el.style.height=value.y+o.units;});},backgroundPosition:function(o){var value={};value.x=o.transforms[0].path[percent];value.y=o.transforms[1].path[percent];that.each(function(el){el.style.backgroundPosition=value.x+o.units+" "+value.y+o.units;});},rotate:function(o){var value=o.transforms[0].path[percent];that.each(function(el){el.style["-webkit-transform"]="rotate("+value+"deg)";el.style.MozTransform="rotate("+value+"deg)";});},color:function(o){this.genericColor(o);},backgroundColor:function(o){this.genericColor(o);},borderColor:function(o){this.genericColor(o);}};step=function(){var i;if(timeoutID!==-1){clearTimeout(timeoutID);}
percent=getElapsedPercent();if(reverse){percent=steps-percent;}
for(i=0;i<animations.length;i+=1){if(animations[i].handle){animations[i].handle.goToFrameAtTime(elapsedTime);}else if(updateHandlers[animations[i].property]){updateHandlers[animations[i].property](animations[i]);}else{updateHandlers.generic(animations[i]);}}
if((!reverse&&percent>=steps)||(reverse&&percent<=0)){if(!loop){if(callback){callback();}}else{if(stopAnimation!==true){if(loop==='reverse'&&reverse===false){reverse=true;}else{reverse=false;}
startTime=startTime+(duration*steps);timeoutID=setTimeout(step,tick);}else{if(callback){callback();}}}}else{timeoutID=setTimeout(step,tick);}};preCalcTransforms();return{start:start,stop:stop,getRawValuesAtFrame:getRawValuesAtFrame,goToFrame:goToFrame,goToFrameAtTime:goToFrameAtTime,getStartTime:getStartTime};}});window.orbit=window.$orb=orbit;})(window);(function(window){orbit.fn.extend({on:function(e,func){var that=this;this.each(function(el){NW.Event.appendListener(el,e,func,false);});return this;},unbind:function(e,func){var that=this;this.each(function(el){NW.Event.removeListener(el,e,func);});return this;}});})(window)